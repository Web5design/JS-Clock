/*!
 *	JS Clock - jQuery Plugin version 0.2
 * No website for now.
 *
 *	Copyright (c) 2010 Thiago Cavalcanti Pimenta.
 *	Dual licensed under the MIT and GPL version 3 licenses.
 * Check mit.txt and gpl.txt on this distribution for the respective licensing text.
 *
 *	Date: 2010-07-11 (Sun, 11 Oct 2010)
 */
(function($){$.fn.jsclock=function(sTime){var iCurrentHour;var iCurrentMinute;var iCurrentSecond;var sCurrentTime;var oApplyTo=$(this);var updateTimeString=function(){var addLeadingZero=function(iTimeStringFragment){if(iTimeStringFragment<10&&iTimeStringFragment.length!==2){iTimeStringFragment="0"+iTimeStringFragment;} return iTimeStringFragment;};iCurrentHour=addLeadingZero(iCurrentHour);iCurrentMinute=addLeadingZero(iCurrentMinute);iCurrentSecond=addLeadingZero(iCurrentSecond);sCurrentTime=iCurrentHour+":"+iCurrentMinute+":"+iCurrentSecond;oApplyTo.html(sCurrentTime);};var rValidateTimeString=/^(([01][0-9])|(2[0-3])):[0-5][0-9]:[0-5][0-9]$/;if(sTime){if(rValidateTimeString.test(sTime)){var aHoursMinutesSeconds=sTime.split(':');iCurrentHour=aHoursMinutesSeconds[0];iCurrentMinute=aHoursMinutesSeconds[1];iCurrentSecond=aHoursMinutesSeconds[2];var clockwork=function(){if(iCurrentSecond<59){iCurrentSecond++;} else{iCurrentSecond=0;if(iCurrentMinute<59){iCurrentMinute++;} else{iCurrentMinute=0;if(iCurrentHour<23){iCurrentHour++;} else{iCurrentHour=0;}}} updateTimeString();(setTimeout(clockwork,1000));};clockwork();} else{oApplyTo.html('Time string <strong>must</strong> be in the format "HH:MM:SS". Hours, minutes and seconds are all <strong>REQUIRED</strong>, as are the leading zeros, if any.');}} else{var oCurrentDate;var clientClock=function(){oCurrentDate=new Date();iCurrentHour=oCurrentDate.getHours();iCurrentMinute=oCurrentDate.getMinutes();iCurrentSecond=oCurrentDate.getSeconds();updateTimeString();(setTimeout(clientClock,1000));};clientClock();}};})(jQuery);
